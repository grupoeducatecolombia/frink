<!-- <div class="p-3">
    <apx-chart
      [series]="chartOptions.series || []"
      [chart]="chartOptions.chart || { type: 'bar', height: 350 }"
      [dataLabels]="chartOptions.dataLabels || { enabled: false }"
      [plotOptions]="chartOptions.plotOptions || { bar: { horizontal: false } }"
      [yaxis]="chartOptions.yaxis || {title: { text: 'Promedio' }, min: 0, max: 500,}"
      [xaxis]="chartOptions.xaxis || { categories: [] }"
      [fill]="chartOptions.fill || { type: 'solid' }"
      [title]="chartOptions.title || {text: 'Esperando datos de consulta', align: 'center'}"
    ></apx-chart>
</div> -->

<div class="w-full min-h-screen p-8">
  <div class="max-w-7xl mx-auto">
    <!-- Header -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
      <h1 class="text-3xl font-bold text-center text-gray-800 mb-4">
        üìä An√°lisis de Desviaci√≥n Est√°ndar
      </h1>

      <!-- Selector de √Åreas -->
      <div class="flex flex-wrap justify-center gap-3 mb-4">
        @for (area of areas; track area) {
          <button 
            (click)="seleccionarArea(area)"
            [class.bg-blue-600]="areaSeleccionada === area"
            [class.bg-gray-200]="areaSeleccionada !== area"
            [class.text-white]="areaSeleccionada === area"
            [class.text-gray-700]="areaSeleccionada !== area"
            class="px-4 py-2 rounded-lg text-sm font-semibold transition-all duration-200 hover:shadow-md"
          >
            <span class="mr-1">
              @switch (area) {
                @case ('MATEMATICAS') { üìä }
                @case ('LECTURA') { üìö }
                @case ('NATURALES') { üî¨ }
                @case ('SOCIALES') { üåç }
                @case ('INGLES') { üó£Ô∏è }
              }
            </span>
            {{area}}
          </button>
        }
      </div>
    </div>

    <!-- Gr√°fico Principal -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
      <!-- Leyenda de colores -->
      <div class="flex justify-center gap-6 mb-4 p-3 bg-gray-50 rounded-lg">
        <div class="flex items-center gap-2">
          <div class="w-4 h-4 bg-[#FF6B6B] rounded"></div>
          <span class="text-sm">L√≠mite Superior</span>
        </div>
        <div class="flex items-center gap-2">
          <div class="w-4 h-4 bg-[#4ECDC4] rounded"></div>
          <span class="text-sm">Promedio</span>
        </div>
        <div class="flex items-center gap-2">
          <div class="w-4 h-4 bg-[#FFE66D] rounded"></div>
          <span class="text-sm">L√≠mite Inferior</span>
        </div>
      </div>

      <!-- Gr√°fico ApexCharts -->
      <apx-chart
        #chart
        [series]="chartOptions['series'] || []"
        [chart]="chartOptions['chart']"
        [colors]="chartOptions['colors']"
        [stroke]="chartOptions['stroke']"
        [markers]="chartOptions['markers']"
        [fill]="chartOptions['fill']"
        [dataLabels]="chartOptions['dataLabels']"
        [xaxis]="chartOptions['xaxis']"
        [yaxis]="chartOptions['yaxis']"
        [title]="chartOptions['title']"
        [tooltip]="chartOptions['tooltip']"
      ></apx-chart>
    </div>

    <!-- Panel Informativo -->
    <div class="bg-white rounded-lg shadow-lg p-6">
      <div class="text-center mb-4">
        <h3 class="text-lg font-bold text-gray-800">
          An√°lisis del √Årea: {{areaSeleccionada}}
        </h3>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg">
          <p class="text-sm text-gray-600">Promedio General</p>
          <p class="text-2xl font-bold text-blue-600">
            {{getPromedioActual()?.toFixed(1) || '-'}}
          </p>
        </div>
        
        <div class="bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg">
          <p class="text-sm text-gray-600">Desviaci√≥n Est√°ndar</p>
          <p class="text-2xl font-bold text-green-600">
            ¬±{{getDesviacionActual()?.toFixed(1) || '-'}}
          </p>
        </div>
        
        <div class="bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg">
          <p class="text-sm text-gray-600">Rango de Variaci√≥n</p>
          <p class="text-2xl font-bold text-purple-600">
            {{getRangoActual() || '-'}}
          </p>
        </div>
      </div>
    </div>
  </div>
</div>